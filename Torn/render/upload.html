<!DOCTYPE html>
<head>
    <meta charset="UTF-8"/>
    <title>Upload Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" rel="stylesheet">
    <link href="../static/css/fileinput.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" media="all"
          rel="stylesheet" type="text/css"/>
    <link href="../static/themes/explorer-fa/theme.min.css" media="all" rel="stylesheet" type="text/css"/>
    <script src="../static/js/jquery.js"></script>
    <script src="../static/js/plugins/sortable.js" type="text/javascript"></script>
    <script src="../static/js/fileinput.js" type="text/javascript"></script>
    <script src="../static/js/locales/fr.js" type="text/javascript"></script>
    <script src="../static/js/locales/es.js" type="text/javascript"></script>
    <script src="../static/themes/explorer-fa/theme.js" type="text/javascript"></script>
    <script src="../static/themes/fa/theme.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
            type="text/javascript"></script>
    <script src="../static/js/bootstrap.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#btn_sub").click(function () {

                var file = $("#kv-explorer")[0].files;
                var form = new FormData();
                for(i = 0;i<file.length;i++){
                    form.append("f"+i,file[i])
                    console.log(file[i])
                }
                var type1 = $("#cho").val();
                form.append("type1", type1);
                form.append("length",file.length)
                $.ajax({
                    url:"/upload",
                    type:"post",
                    data:form,
                    cache:false,
                    processData: false,  // tell jQuery not to process the data
                    contentType: false,
                    success:function (databack) {
                        alert("上传成功")
                        window.close()
                    }
                })

            })
        })
    </script><!--文件上传-->
    <style type="text/css">
        #choose{
                margin-bottom:2px;
                margin-bottom:-2px\9;
        }
    </style>
</head>
<body>

<div class="file-input theme-explorer-fa file-input-ajax-new">

    <div class="kv-upload-progress kv-hidden"></div>
    <div class="clearfix"></div>
    <div class="input-group file-caption-main">

        <div class="input-group-btn">
            <button type="button" tabindex="500" title="Clear selected files"
                    class="btn btn-default btn-secondary fileinput-remove fileinput-remove-button"><i
                    class="fa fa-trash"></i> <span class="hidden-xs">Remove</span></button>
            <button type="button" tabindex="500" title="Abort ongoing upload"
                    class="btn btn-default btn-secondary kv-hidden fileinput-cancel fileinput-cancel-button"><i
                    class="fa fa-ban"></i> <span class="hidden-xs">Cancel</span></button>
            <a href="#" tabindex="500" title="Upload selected files"
               class="btn btn-default btn-secondary fileinput-upload fileinput-upload-button"><i
                    class="fa fa-upload"></i> <span class="hidden-xs">Upload</span></a>
            <div style="background-color: white; height: 500px; width: 500px; margin-left: 160px" tabindex="500" class="btn btn-primary btn-file"><i class="fa fa-folder-open"></i> <span
                    class="hidden-xs">Browse …</span><input id="kv-explorer" multiple="" type="file"></div>

        </div>
        <br>

<br>
     <div id="choose"><select id="cho" name="cho">
         <option selected="selected">请选择</option>
         <option value="1">Design</option>
         <option value="3">Art</option>
         <option value="2">Photo</option>
     </select>
            </div>
    </div>
    <button id="btn_sub" type="button" class="btn btn-primary" style="margin-left: 160px">Submit</button>
    <button type="reset" class="btn btn-default" style="margin-left: 355px">Reset</button>
</div>

    <script type="text/javascript">
        $(document).ready(function () {
         $("#kv-explorer").fileinput({
            'theme': 'explorer-fa',
            'uploadUrl': '#',
            overwriteInitial: false,
            initialPreviewAsData: true,
            initialPreview: [

            ],
            initialPreviewConfig: [
            ]
        });
    })
</script>
</body>

</html>